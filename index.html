<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Losowanie Prezentów Świątecznych</title>
<style>
/* (Tu wklej Twój CSS tak jak wcześniej, dla skrótu pomijam w tym fragmencie) */
body {
  font-family: 'Arial', sans-serif;
  background: linear-gradient(to bottom right, #18314f 70%, #e53935 100%);
  color: #094f22;
  text-align: center;
  padding: 40px;
  background-image: url('https://cdn.pixabay.com/photo/2017/12/04/19/58/christmas-2994134_1280.jpg');
  background-size: cover;
  background-repeat: no-repeat;
  background-position: center;
}

... /* wszystkie Twoje style tutaj */

</style>
</head>
<body>

<h1>
  <span class="bauble">🎄</span>
  Losowanie Prezentów Świątecznych
  <span class="bauble">🎅</span>
</h1>
<div class="lights">
  <span class="light"></span><span class="light"></span><span class="light"></span>
  <span class="light"></span><span class="light"></span><span class="light"></span>
</div>

<button id="musicToggle" style="font-size:18px; padding:8px 16px; background:#ff6f00; color:white; border:none; border-radius:8px; cursor:pointer; margin-bottom: 14px;">
  Włącz muzykę
</button>

<div class="photos-list" id="all-photos"></div>
<p id="instr" style="font-size:1.2em;margin:28px 0 0 0;">
  Wybierz swoje imię, aby zobaczyć komu kupujesz prezent.<br>
  <span style="color:#ffd700; font-weight:bold;">Nikt poza Tobą nie zobaczy wyniku!</span>
</p>
<select id="whoSelect">
  <option value="" disabled selected>Wybierz imię</option>
</select>
<br />
<button id="drawBtn" onclick="showReceiver()">Losuj!</button>
<br>
<img id="maklowicz" src="img/maklowicz.jpg" class="big-xmas-img" alt="Świąteczne życzenia">

<div id="resultArea" class="result" style="display:none;"></div>

<audio id="bg-music" loop>
  <source src="img/muzyka.mp3" type="audio/mpeg" />
  Twoja przeglądarka nie obsługuje odtwarzania audio.
</audio>

<script>
  const PARTICIPANTS = [
    {name: 'Paulina', file: 'img/pauilina.jpg'},
    {name: 'Domi', file: 'img/domi.jpg'},
    {name: 'Aga', file: 'img/aga.jpg'},
    {name: 'Szymon', file: 'img/Szymon.jpg'},
    {name: 'Pawulon', file: 'img/pawulon.jpg'},
    {name: 'Papryk', file: 'img/papryk.jpg'},
    {name: 'Patrycja', file: 'img/patrycja.jpg'},
    {name: 'Maki', file: 'img/maki.jpg'},
    {name: 'Filip', file: 'img/filip.jpg'},
    {name: 'Aluta', file: 'img/aluta.jpg'},
    {name: 'Julia', file: 'img/julia.jpg'},
    {name: 'Pioterek', file: 'img/pioterek.jpg'}
  ];

  const assignments = {
    'Paulina': 'Julia',
    'Domi': 'Pioterek',
    'Aga': 'Paulina',
    'Szymon': 'Filip',
    'Pawulon': 'Aluta',
    'Papryk': 'Pawulon',
    'Patrycja': 'Aga',
    'Maki': 'Szymon',
    'Filip': 'Papryk',
    'Aluta': 'Domi',
    'Julia': 'Patrycja',
    'Pioterek': 'Maki'
  };

  // Wypełnianie zdjęć pod tytułem
  const allPhotosDiv = document.getElementById('all-photos');
  PARTICIPANTS.forEach(p => {
    const wrapper = document.createElement('div');
    wrapper.style.display = 'flex';
    wrapper.style.flexDirection = 'column';
    wrapper.style.alignItems = 'center';
    wrapper.style.margin = '3px';
    wrapper.innerHTML = `
      <img src="${p.file}" class="person-photo" alt="${p.name}">
      <span class="person-label">${p.name}</span>
    `;
    allPhotosDiv.appendChild(wrapper);
  });

  // Dodawanie opcji wyboru imion
  const whoSelect = document.getElementById('whoSelect');
  PARTICIPANTS.forEach(p => {
    const opt = document.createElement('option');
    opt.value = p.name;
    opt.textContent = p.name;
    whoSelect.appendChild(opt);
  });

  // Funkcja pokazująca wynik losowania
  function showReceiver(){
    const giver = whoSelect.value;
    if(!giver){
      alert('Wybierz swoje imię!');
      return;
    }
    const receiverName = assignments[giver];
    const receiverObj = PARTICIPANTS.find(p => p.name === receiverName);

    let out = `<h2>${giver}, kupujesz prezent dla:</h2>`;
    out += `<h3>${receiverName}</h3>`;
    out += `<img src="${receiverObj.file}" class="receiver-photo" id="winnerphoto" alt="${receiverName}">`;
    out += `<div class="thanks">Z góry dziękuję za prezent, ${giver}!</div>`;

    const resultArea = document.getElementById('resultArea');
    resultArea.style.display = 'inline-block';
    resultArea.innerHTML = out;

    // Ukryj przycisk i select oraz instrukcję
    document.getElementById('drawBtn').style.display = 'none';
    whoSelect.style.display = 'none';
    document.getElementById('instr').style.display = 'none';

    // Zmniejsz zdjęcie makłowicza
    document.getElementById('maklowicz').classList.add('small');
  }

  // Obsługa muzyki i przycisku
  const music = document.getElementById('bg-music');
  const musicToggle = document.getElementById('musicToggle');

  const isMobile = /Android|iPhone|iPad|iPod|Opera Mini|IEMobile|WPDesktop/i.test(navigator.userAgent);

  if(!isMobile){
    music.volume = 0.1;
    music.play().catch(() => {
      // Autoplay blokowany - nic nie robimy
    });
    musicToggle.textContent = "Wyłącz muzykę";
  } else {
    music.volume = 0.1;
    music.pause();
    musicToggle.textContent = "Włącz muzykę";
  }

  musicToggle.addEventListener('click', () => {
    if(music.paused){
      music.play();
      musicToggle.textContent = "Wyłącz muzykę";
    } else {
      music.pause();
      musicToggle.textContent = "Włącz muzykę";
    }
  });
</script>

</body>
</html>
